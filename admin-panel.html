<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - RealEstate Bamenda</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/admin.css">
    <link rel="stylesheet" href="css/responsive.css">
</head>
<body class="admin-body">
    <!-- Admin Sidebar -->
    <aside class="admin-sidebar">
        <div class="sidebar-header">
            <h2>üè† PropeNest</h2>
            <p>Admin Dashboard</p>
        </div>
        
        <nav class="sidebar-nav">
            <a href="#" class="nav-item active" onclick="showSection('properties')">
                <span class="nav-icon">üè¢</span>
                <span>Properties</span>
            </a>
            <a href="#" class="nav-item" onclick="showSection('tenants')">
                <span class="nav-icon">üë•</span>
                <span>Tenants</span>
            </a>
            <a href="#" class="nav-item" onclick="showSection('owners')">
                <span class="nav-icon">üë§</span>
                <span>Land Owners</span>
            </a>
            <a href="#" class="nav-item" onclick="showSection('statistics')">
                <span class="nav-icon">üìä</span>
                <span>Statistics</span>
            </a>
        </nav>
        
        <div class="sidebar-footer">
            <a href="index.html" class="btn btn-secondary btn-block">
                üè† View Website
            </a>
            <button onclick="handleLogout()" class="btn btn-danger btn-block">
                üö™ Logout
            </button>
        </div>
    </aside>

    <!-- Main Admin Content -->
    <main class="admin-main">
        <!-- Top Bar -->
        <div class="admin-topbar">
            <div class="topbar-left">
                <button class="mobile-sidebar-toggle" onclick="toggleSidebar()">‚ò∞</button>
                <h1 id="sectionTitle">Property Management</h1>
            </div>
            <div class="topbar-right">
                <div class="admin-user">
                    <span class="user-avatar">üë§</span>
                    <span class="user-name">Admin</span>
                </div>
            </div>
        </div>

        <!-- Properties Section -->
        <section id="propertiesSection" class="admin-section-content">
            <!-- Statistics Cards -->
            <div class="admin-stats">
                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">üè¢</div>
                    <div class="stat-info">
                        <h3 id="totalPropertiesAdmin">0</h3>
                        <p>Total Properties</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">üè∑Ô∏è</div>
                    <div class="stat-info">
                        <h3 id="forSaleCount">0</h3>
                        <p>For Sale</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">üîë</div>
                    <div class="stat-info">
                        <h3 id="forRentCount">0</h3>
                        <p>For Rent</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">üåç</div>
                    <div class="stat-info">
                        <h3 id="quartersCount">0</h3>
                        <p>Quarters</p>
                    </div>
                </div>
            </div>

            <!-- Action Bar -->
            <div class="action-bar">
                <button class="btn btn-primary" onclick="showAddPropertyForm()">
                    ‚ûï Add New Property
                </button>
            </div>

            <!-- Properties Table -->
            <div class="admin-table-container">
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Image</th>
                            <th>Title</th>
                            <th>Type</th>
                            <th>Status</th>
                            <th>Price (FCFA)</th>
                            <th>Location</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="propertiesTableBody">
                        <!-- Properties will be loaded here -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Tenants Section -->
        <section id="tenantsSection" class="admin-section-content" style="display: none;">
            <div class="action-bar">
                <button class="btn btn-primary" onclick="showAddTenantForm()">
                    ‚ûï Add New Tenant
                </button>
            </div>

            <div class="admin-table-container">
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Property</th>
                            <th>Phone</th>
                            <th>Email</th>
                            <th>Rent Amount</th>
                            <th>Move-in Date</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="tenantsTableBody">
                        <!-- Tenants will be loaded here -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Land Owners Section -->
        <section id="ownersSection" class="admin-section-content" style="display: none;">
            <div class="action-bar">
                <button class="btn btn-primary" onclick="showAddOwnerForm()">
                    ‚ûï Add New Owner
                </button>
            </div>

            <div class="admin-table-container">
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Land/Property</th>
                            <th>Location</th>
                            <th>Phone</th>
                            <th>Email</th>
                            <th>Area (m¬≤)</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="ownersTableBody">
                        <!-- Owners will be loaded here -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Statistics Section -->
        <section id="statisticsSection" class="admin-section-content" style="display: none;">
            <div class="stats-grid-large">
                <div class="stat-card-large">
                    <h3>Properties Overview</h3>
                    <div class="chart-placeholder">
                        <div class="property-breakdown">
                            <div class="breakdown-item">
                                <span class="breakdown-label">Houses:</span>
                                <span class="breakdown-value" id="housesCount">0</span>
                            </div>
                            <div class="breakdown-item">
                                <span class="breakdown-label">Apartments:</span>
                                <span class="breakdown-value" id="apartmentsCount">0</span>
                            </div>
                            <div class="breakdown-item">
                                <span class="breakdown-label">Land:</span>
                                <span class="breakdown-value" id="landCount">0</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="stat-card-large">
                    <h3>Revenue Overview</h3>
                    <div class="revenue-stats">
                        <div class="revenue-item">
                            <p>Total Sales Value</p>
                            <h2 id="totalSalesValue">0 FCFA</h2>
                        </div>
                        <div class="revenue-item">
                            <p>Monthly Rental Income</p>
                            <h2 id="monthlyRental">0 FCFA</h2>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Property Modal (same as before) -->
    <div id="propertyModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Add New Property</h2>
                <span class="close" onclick="closePropertyModal()">&times;</span>
            </div>
            
            <form id="propertyForm" onsubmit="handlePropertySubmit(event)">
                <input type="hidden" id="propertyId">
                
                <div class="form-row">
                    <div class="form-group">
                        <label>Property Title *</label>
                        <input type="text" id="title" required placeholder="e.g., Luxury 3 Bedroom Apartment">
                    </div>
                    
                    <div class="form-group">
                        <label>Location *</label>
                        <input type="text" id="location" required placeholder="e.g., Commercial Avenue, Bamenda">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Property Type *</label>
                        <select id="type" required>
                            <option value="">Select Type</option>
                            <option value="house">House</option>
                            <option value="apartment">Apartment</option>
                            <option value="land">Land</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Status *</label>
                        <select id="status" required>
                            <option value="">Select Status</option>
                            <option value="rent">For Rent</option>
                            <option value="sale">For Sale</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Price (FCFA) *</label>
                        <input type="number" id="price" required placeholder="e.g., 150000">
                    </div>
                    
                    <div class="form-group">
                        <label>Area (m¬≤) *</label>
                        <input type="number" id="area" required placeholder="e.g., 120">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Bedrooms</label>
                        <input type="number" id="bedrooms" min="0" placeholder="e.g., 3">
                    </div>
                    
                    <div class="form-group">
                        <label>Bathrooms</label>
                        <input type="number" id="bathrooms" min="0" placeholder="e.g., 2">
                    </div>
                </div>

                <div class="form-group">
                    <label>Description *</label>
                    <textarea id="description" required rows="4" placeholder="Enter property description..."></textarea>
                </div>

                <div class="form-group">
                    <label>Amenities (comma-separated)</label>
                    <input type="text" id="amenities" placeholder="e.g., Water, Parking, Security, Garden">
                </div>

                <div class="form-group">
                    <label>Image URLs (comma-separated) *</label>
                    <textarea id="images" required rows="3" placeholder="https://example.com/image1.jpg, https://example.com/image2.jpg"></textarea>
                    <small>Enter image URLs separated by commas</small>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closePropertyModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Property</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Tenant Modal -->
    <div id="tenantModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="tenantModalTitle">Add New Tenant</h2>
                <span class="close" onclick="closeTenantModal()">&times;</span>
            </div>
            
            <form id="tenantForm" onsubmit="handleTenantSubmit(event)">
                <input type="hidden" id="tenantId">
                
                <div class="form-row">
                    <div class="form-group">
                        <label>Full Name *</label>
                        <input type="text" id="tenantName" required placeholder="e.g., John Doe">
                    </div>
                    
                    <div class="form-group">
                        <label>Property *</label>
                        <select id="tenantProperty" required>
                            <option value="">Select Property</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Phone *</label>
                        <input type="tel" id="tenantPhone" required placeholder="+237 6XX XXX XXX">
                    </div>
                    
                    <div class="form-group">
                        <label>Email *</label>
                        <input type="email" id="tenantEmail" required placeholder="john@example.com">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Rent Amount (FCFA) *</label>
                        <input type="number" id="tenantRent" required placeholder="e.g., 150000">
                    </div>
                    
                    <div class="form-group">
                        <label>Move-in Date *</label>
                        <input type="date" id="tenantMoveIn" required>
                    </div>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeTenantModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Tenant</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Owner Modal -->
    <div id="ownerModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="ownerModalTitle">Add New Land Owner</h2>
                <span class="close" onclick="closeOwnerModal()">&times;</span>
            </div>
            
            <form id="ownerForm" onsubmit="handleOwnerSubmit(event)">
                <input type="hidden" id="ownerId">
                
                <div class="form-row">
                    <div class="form-group">
                        <label>Full Name *</label>
                        <input type="text" id="ownerName" required placeholder="e.g., Jane Smith">
                    </div>
                    
                    <div class="form-group">
                        <label>Property/Land *</label>
                        <select id="ownerProperty" required>
                            <option value="">Select Property</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Location *</label>
                        <input type="text" id="ownerLocation" required placeholder="e.g., Up Station, Bamenda">
                    </div>
                    
                    <div class="form-group">
                        <label>Area (m¬≤) *</label>
                        <input type="number" id="ownerArea" required placeholder="e.g., 500">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Phone *</label>
                        <input type="tel" id="ownerPhone" required placeholder="+237 6XX XXX XXX">
                    </div>
                    
                    <div class="form-group">
                        <label>Email *</label>
                        <input type="email" id="ownerEmail" required placeholder="jane@example.com">
                    </div>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeOwnerModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Owner</button>
                </div>
            </form>
        </div>
    </div>

    <script src="js/data.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/main.js"></script>
    <script src="js/admin-auth.js"></script>
    <script src="js/admin-panel.js"></script>
</body>
</html>